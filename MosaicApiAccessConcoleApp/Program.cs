using System;
using System.Collections.Generic;
using System.Linq;
using System.Net.Http;
using System.Text;
using System.Threading.Tasks;
using Newtonsoft.Json;
using UBC.RISe.MosicIntegration;
using UBC.RISe.MosicIntegration.DataModels;
using UBC.RISe.MosicIntegration.Service;

namespace MosaicApiAccessConcoleApp
{
    class Program
    {
        static void Main(string[] args)
        {
            
            
            //var jSonString = "{ \"prot_no\":\"A19-0068\",\"prot_title\":\"Copy of -- MicroPET Imaging in rodents including both healthy and neurodegenerative models\",\"prot_start\":\"2019-04-28T00:00:00\",\"prot_expire\":\"1969-12-31T00:00:00\",\"pi_cwl\":\"vsossi\",\"prot_type\":\"Research\",\"prot_purpose\":\"1\",\"prot_keywords\":\"Blood Sampling, Blood Collection;Physical Methods of Euthanasia;Genetically modified animal;Biopsy/Tissue/Bone Marrow Collection;Radioisotope Administration;Recovery Surgery;Stereotaxic SurgeryStereotaxic Surgery;\",\"prot_species\":[{\"sp_nm\":\"Rats\",\"sp_pain_level\":\"D\",\"sp_num\":\"57\"},{\"sp_nm\":\"Mice\",\"sp_pain_level\":\"D\",\"sp_num\":\"32\"},{\"sp_nm\":\"Rats\",\"sp_pain_level\":\"D\",\"sp_num\":\"16\"}],\"prot_total_num\":\"105\"}";
            //var jSonString =
              //  "{\"prot_cur_state\":\"Approved\",\"prot_nxt_state\":\"Suspended\",\"prot_con_approval\":\"0\",\"prot_no\":\"A19-0026\",\"prot_title\":\"Copy of Happy Friday to Test Future Start Date\",\"prot_start\":\"2019-04-29T00:00:00\",\"prot_expire\":\"2019-04-30T00:00:00\",\"prot_pi\":[{\"pi_cwl\":\"kmcnagny\",\"pi_firstname\":\"Kelly\",\"pi_lastname\":\"McNagny\",\"pi_email\":\"kelly@brc.ubc.ca\",\"pi_phone\":\"604-822-7824\"}],\"prot_type\":\"Teaching\",\"prot_purpose\":\"4\",\"prot_keywords\":\"Blood Sampling, Blood Collection;Cannulation/Catherization;Drug Exposure/Chemical Exposure/Toxicity/Tolerated Dosing;Altered Sensory Systems\",\"prot_ccaccategory\":\"E\",\"prot_species\":[{\"sp_nm\":\"Mice\",\"sp_pain_level\":\"A\",\"sp_num\":\"63\"},{\"sp_nm\":\"Mice\",\"sp_pain_level\":\"C\",\"sp_num\":\"100\"},{\"sp_nm\":\"Rats\",\"sp_pain_level\":\"E\",\"sp_num\":\"109\"},{\"sp_nm\":\"Rats\",\"sp_pain_level\":\"D\",\"sp_num\":\"44\"}],\"prot_persons\":[{\"per_cwl\":\"melle\",\"per_firstname\":\"Marielle\",\"per_lastname\":\"Monteiro Gilmour\",\"per_email\":\"cac@bamfieldmsc.com\",\"per_phone\":\"250-728-3301 ext 229\"},{\"per_cwl\":\"zhangjoh\",\"per_firstname\":\"Xiaoming (John) \",\"per_lastname\":\"Zhang\",\"per_email\":\"john.zhang@ubc.ca\",\"per_phone\":\"(604) 827- 4367\"},{\"per_cwl\":\"jjphung\",\"per_firstname\":\"John Adams\",\"per_lastname\":\"Phung\",\"per_email\":\"john.phung@ubc.ca\",\"per_phone\":\"6048274367\"},{\"per_cwl\":\"rdesai\",\"per_firstname\":\"Ronakkumar\",\"per_lastname\":\"Desai\",\"per_email\":\"ronak.desai@ubc.ca\",\"per_phone\":\"604-827-3939\"},{\"per_cwl\":\"bryomoto\",\"per_firstname\":\"Brian\",\"per_lastname\":\"Ryomoto\",\"per_email\":\"brian.ryomoto@ubc.ca\",\"per_phone\":\"604-827-5919\"},{\"per_cwl\":\"nd0202\",\"per_firstname\":\"Nathan\",\"per_lastname\":\"Dahlenburg\",\"per_email\":\"nd0202@mail.ubc.ca\",\"per_phone\":\"7783027494\"},{\"per_cwl\":\"lborecky\",\"per_firstname\":\"Lisa\",\"per_lastname\":\"Borecky\",\"per_email\":\"lborecky@mail.ubc.ca\",\"per_phone\":\"6132634325\"},{\"per_cwl\":\"jeannia\",\"per_firstname\":\"Jeannia\",\"per_lastname\":\"Ying\",\"per_email\":\"jeannia@mail.ubc.ca\",\"per_phone\":\"604-827-5919\"},{\"per_cwl\":\"chengann\",\"per_firstname\":\"Anne\",\"per_lastname\":\"Cheng\",\"per_email\":\"anne.cheng@ubc.ca\",\"per_phone\":\"827-3425 CDM\"},{\"per_cwl\":\"ggray\",\"per_firstname\":\"Gordon\",\"per_lastname\":\"Gray\",\"per_email\":\"gordon.gray@ubc.ca\",\"per_phone\":\"822-6818\"},{\"per_cwl\":\"mejiabel\",\"per_firstname\":\"Belinda\",\"per_lastname\":\"Mejia\",\"per_email\":\"Belinda.Mejia@ubc.ca\",\"per_phone\":\"604 827 4367\"},{\"per_cwl\":\"bauyoung\",\"per_firstname\":\"Brian\",\"per_lastname\":\"Auyoung\",\"per_email\":\"brian.auyoung@ubc.ca\",\"per_phone\":\"604-827-4355\"},{\"per_cwl\":\"natbor\",\"per_firstname\":\"Natalia\",\"per_lastname\":\"Borisenko\",\"per_email\":\"Natalia.borisenko@ubc.ca\",\"per_phone\":\"604-827-3939\"},{\"per_cwl\":\"smith45\",\"per_firstname\":\"Stephanie\",\"per_lastname\":\"Smith\",\"per_email\":\"stephanie.smith5@vch.ca\",\"per_phone\":\"875-4159\"},{\"per_cwl\":\"victorch\",\"per_firstname\":\"Victor Kwok Shu\",\"per_lastname\":\"Chan\",\"per_email\":\"victor.chan@ubc.ca\",\"per_phone\":\"778-829-2373\"},{\"per_cwl\":\"dorchard\",\"per_firstname\":\"Kate\",\"per_lastname\":\"Orchard\",\"per_email\":\"Kate.Orchard@vch.ca\",\"per_phone\":\"604-875-4159\"},{\"per_cwl\":\"letrung\",\"per_firstname\":\"Alice\",\"per_lastname\":\"Chan\",\"per_email\":\"alice@psych.ubc.ca\",\"per_phone\":\"-\"},{\"per_cwl\":\"qfu\",\"per_firstname\":\"Qi\",\"per_lastname\":\"Fu\",\"per_email\":\"david.fu@ubc.ca\",\"per_phone\":\"6048275919\"},{\"per_cwl\":\"kelleyba\",\"per_firstname\":\"Kelley\",\"per_lastname\":\"Bartlett\",\"per_email\":\"acc@mail.bamfieldmsc.com\",\"per_phone\":\"250-728-3301 ext. 275\"},{\"per_cwl\":\"yeminli\",\"per_firstname\":\"Min Li Emily\",\"per_lastname\":\"Ye\",\"per_email\":\"yeminli@mail.ubc.ca\",\"per_phone\":\"6048273939\"},{\"per_cwl\":\"chenrena\",\"per_firstname\":\"Chen Rena\",\"per_lastname\":\"Chen\",\"per_email\":\"chenrena@mail.ubc.ca\",\"per_phone\":\"604-827-0000\"},{\"per_cwl\":\"cwabnitz\",\"per_firstname\":\"Colette\",\"per_lastname\":\"Wabnitz\",\"per_email\":\"c.wabnitz@oceans.ubc.ca\",\"per_phone\":\"\"},{\"per_cwl\":\"wynwynn\",\"per_firstname\":\"Gadwyn\",\"per_lastname\":\"Gan\",\"per_email\":\"wynwynn@mail.ubc.ca\",\"per_phone\":\"604 827 3939\"},{\"per_cwl\":\"jasonyao\",\"per_firstname\":\"Jian Guo\",\"per_lastname\":\"Yao\",\"per_email\":\"jason.yao@ubc.ca\",\"per_phone\":\"604-827-5919\"},{\"per_cwl\":\"cowanmat\",\"per_firstname\":\"Matthew\",\"per_lastname\":\"Cowan\",\"per_email\":\"matthew@brc.ubc.ca\",\"per_phone\":\"604-822-8635\"},{\"per_cwl\":\"tinapod\",\"per_firstname\":\"Tina M\",\"per_lastname\":\"Podlasly\",\"per_email\":\"acc.coord@bamfield.msc.com\",\"per_phone\":\"50-286-6102\"},{\"per_cwl\":\"hzhang02\",\"per_firstname\":\"Hui\",\"per_lastname\":\"Zhang\",\"per_email\":\"hui.zhang@ubc.ca\",\"per_phone\":\"604 827 5919\"},{\"per_cwl\":\"vesnap\",\"per_firstname\":\"Vesna \",\"per_lastname\":\"Pavlovic\",\"per_email\":\"vesnap@mail.ubc.ca\",\"per_phone\":\"604-827-4367\"},{\"per_cwl\":\"pachecom\",\"per_firstname\":\"Miguel\",\"per_lastname\":\"Pacheco\",\"per_email\":\"miguel.pacheco@vch.ca\",\"per_phone\":\"822-7597\"},{\"per_cwl\":\"orange16\",\"per_firstname\":\"Yi Y\",\"per_lastname\":\"Yang\",\"per_email\":\"yi.yang@ubc.ca\",\"per_phone\":\"604-827-3939\"},{\"per_cwl\":\"hjantzen\",\"per_firstname\":\"Heidi\",\"per_lastname\":\"Jantzen\",\"per_email\":\"heidi.jantzen@ubc.ca\",\"per_phone\":\"/\"},{\"per_cwl\":\"kranta\",\"per_firstname\":\"Krista\",\"per_lastname\":\"Ranta\",\"per_email\":\"krista@brc.ubc.ca\",\"per_phone\":\"604-822-8635\"},{\"per_cwl\":\"antonr\",\"per_firstname\":\"Anton\",\"per_lastname\":\"Rabien\",\"per_email\":\"anton@rabien.com\",\"per_phone\":\"250-216-0963\"},{\"per_cwl\":\"miaosy\",\"per_firstname\":\"Suying\",\"per_lastname\":\"Miao\",\"per_email\":\"jane.miao@ubc.ca\",\"per_phone\":\"604 827 4367\"},{\"per_cwl\":\"merkens\",\"per_firstname\":\"Helen\",\"per_lastname\":\"Merkens\",\"per_email\":\"hmerkens@bccrc.ca\",\"per_phone\":\"604-675-8000-ext 7629\"},{\"per_cwl\":\"saialpa\",\"per_firstname\":\"Alpa\",\"per_lastname\":\"Darji\",\"per_email\":\"alpa.darji@ubc.ca\",\"per_phone\":\"7-4367\"},{\"per_cwl\":\"dcarlsen\",\"per_firstname\":\"Diana\",\"per_lastname\":\"Carlsen\",\"per_email\":\"diana.carlsen@ubc.ca\",\"per_phone\":\"604.827.4319\"},{\"per_cwl\":\"dsolomon\",\"per_firstname\":\"Dennis\",\"per_lastname\":\"Solomon\",\"per_email\":\"dennis.solomon@ubc.ca\",\"per_phone\":\"604-675-8816\"},{\"per_cwl\":\"mjhan94\",\"per_firstname\":\"Min-Ji\",\"per_lastname\":\"Han\",\"per_email\":\"mjhan94@mail.ubc.ca\",\"per_phone\":\"6048273425\"}],\"prot_total_num\":\"316\",\"prot_url\":\"https://dev.rise.ubc.ca/rise/sd/Rooms/DisplayPages/LayoutInitial?Container=com.webridge.entity.Entity[OID[40E9133137BEE9439311592A1AB49177]]\"}";

              var jSonString =
                  "{\"prot_cur_state\":\"Suspended\",\"prot_nxt_state\":\"Approved\",\"prot_action\":\"create\",\"prot_con_approval\":\"1\",\"prot_no\":\"A19-0037\",\"prot_title\":\"Copy of -- Copy of -- Copy of -- Spring is in the Air\",\"prot_start\":\"2019-05-12T00:00:00\",\"prot_expire\":\"2020-05-12T00:00:00\",\"prot_pi\":[{\"pi_cwl\":\"mbally\",\"pi_firstname\":\"Marcel B.\",\"pi_lastname\":\"Bally\",\"pi_email\":\"mbally@bccrc.ca\",\"pi_phone\":\"604-675-8020\"}],\"prot_type\":\"Research\",\"prot_purpose\":\"3\",\"prot_keywords\":\"Breeding, Breeding Colony, Sentinel Program;Antibody production;Blood Sampling, Blood Collection;Biopsy/Tissue/Bone Marrow Collection;Behavioural Observation\",\"prot_ccaccategory\":\"C\",\"prot_species\":[{\"sp_nm\":\"Cats\",\"sp_pain_level\":\"B\",\"sp_num\":\"10\"},{\"sp_nm\":\"Rats\",\"sp_pain_level\":\"C\",\"sp_num\":\"150\"},{\"sp_nm\":\"Cows\",\"sp_pain_level\":\"B\",\"sp_num\":\"55\"},{\"sp_nm\":\"Mice\",\"sp_pain_level\":\"B\",\"sp_num\":\"30\"}],\"prot_persons\":[{\"per_cwl\":\"darcyd\",\"per_firstname\":\"Darcy\",\"per_lastname\":\"Davis\",\"per_email\":\"ddavis@cmmt.ubc.ca\",\"per_phone\":\"604-875-3846\"},{\"per_cwl\":\"zhangjoh\",\"per_firstname\":\"Xiaoming (John) \",\"per_lastname\":\"Zhang\",\"per_email\":\"john.zhang@ubc.ca\",\"per_phone\":\"(604) 827- 4367\"},{\"per_cwl\":\"jjphung\",\"per_firstname\":\"John Adams\",\"per_lastname\":\"Phung\",\"per_email\":\"john.phung@ubc.ca\",\"per_phone\":\"6048274367\"},{\"per_cwl\":\"rdesai\",\"per_firstname\":\"Ronakkumar\",\"per_lastname\":\"Desai\",\"per_email\":\"ronak.desai@ubc.ca\",\"per_phone\":\"604-827-3939\"},{\"per_cwl\":\"losborne\",\"per_firstname\":\"Lisa C.\",\"per_lastname\":\"Osborne\",\"per_email\":\"losborne@mail.ubc.ca\",\"per_phone\":\"604-822-6649\"},{\"per_cwl\":\"bryomoto\",\"per_firstname\":\"Brian\",\"per_lastname\":\"Ryomoto\",\"per_email\":\"brian.ryomoto@ubc.ca\",\"per_phone\":\"604-827-5919\"},{\"per_cwl\":\"nd0202\",\"per_firstname\":\"Nathan\",\"per_lastname\":\"Dahlenburg\",\"per_email\":\"nd0202@mail.ubc.ca\",\"per_phone\":\"7783027494\"},{\"per_cwl\":\"lborecky\",\"per_firstname\":\"Lisa\",\"per_lastname\":\"Borecky\",\"per_email\":\"lborecky@mail.ubc.ca\",\"per_phone\":\"6132634325\"},{\"per_cwl\":\"jeannia\",\"per_firstname\":\"Jeannia\",\"per_lastname\":\"Ying\",\"per_email\":\"jeannia@mail.ubc.ca\",\"per_phone\":\"604-827-5919\"},{\"per_cwl\":\"chengann\",\"per_firstname\":\"Anne\",\"per_lastname\":\"Cheng\",\"per_email\":\"anne.cheng@ubc.ca\",\"per_phone\":\"827-3425 CDM\"},{\"per_cwl\":\"mrh\",\"per_firstname\":\"Michael\",\"per_lastname\":\"Hayden\",\"per_email\":\"sbortnick@cmmt.ubc.ca\",\"per_phone\":\"604-875-3535\"},{\"per_cwl\":\"ggray\",\"per_firstname\":\"Gordon\",\"per_lastname\":\"Gray\",\"per_email\":\"gordon.gray@ubc.ca\",\"per_phone\":\"822-6818\"},{\"per_cwl\":\"mejiabel\",\"per_firstname\":\"Belinda\",\"per_lastname\":\"Mejia\",\"per_email\":\"Belinda.Mejia@ubc.ca\",\"per_phone\":\"604 827 4367\"},{\"per_cwl\":\"bauyoung\",\"per_firstname\":\"Brian\",\"per_lastname\":\"Auyoung\",\"per_email\":\"brian.auyoung@ubc.ca\",\"per_phone\":\"604-827-4355\"},{\"per_cwl\":\"natbor\",\"per_firstname\":\"Natalia\",\"per_lastname\":\"Borisenko\",\"per_email\":\"Natalia.borisenko@ubc.ca\",\"per_phone\":\"604-827-3939\"},{\"per_cwl\":\"victorch\",\"per_firstname\":\"Victor Kwok Shu\",\"per_lastname\":\"Chan\",\"per_email\":\"victor.chan@ubc.ca\",\"per_phone\":\"778-829-2373\"},{\"per_cwl\":\"letrung\",\"per_firstname\":\"Alice\",\"per_lastname\":\"Chan\",\"per_email\":\"alice@psych.ubc.ca\",\"per_phone\":\"-\"},{\"per_cwl\":\"qfu\",\"per_firstname\":\"Qi\",\"per_lastname\":\"Fu\",\"per_email\":\"david.fu@ubc.ca\",\"per_phone\":\"6048275919\"},{\"per_cwl\":\"kshayne\",\"per_firstname\":\"Kayla\",\"per_lastname\":\"Shayne\",\"per_email\":\"kshayne@cmmt.ubc.ca\",\"per_phone\":\"604-875-3845\"},{\"per_cwl\":\"yeminli\",\"per_firstname\":\"Min Li Emily\",\"per_lastname\":\"Ye\",\"per_email\":\"yeminli@mail.ubc.ca\",\"per_phone\":\"6048273939\"},{\"per_cwl\":\"chenrena\",\"per_firstname\":\"Chen Rena\",\"per_lastname\":\"Chen\",\"per_email\":\"chenrena@mail.ubc.ca\",\"per_phone\":\"604-827-0000\"},{\"per_cwl\":\"wynwynn\",\"per_firstname\":\"Gadwyn\",\"per_lastname\":\"Gan\",\"per_email\":\"wynwynn@mail.ubc.ca\",\"per_phone\":\"604 827 3939\"},{\"per_cwl\":\"jasonyao\",\"per_firstname\":\"Jian Guo\",\"per_lastname\":\"Yao\",\"per_email\":\"jason.yao@ubc.ca\",\"per_phone\":\"604-827-5919\"},{\"per_cwl\":\"cowanmat\",\"per_firstname\":\"Matthew\",\"per_lastname\":\"Cowan\",\"per_email\":\"matthew@brc.ubc.ca\",\"per_phone\":\"604-822-8635\"},{\"per_cwl\":\"hzhang02\",\"per_firstname\":\"Hui\",\"per_lastname\":\"Zhang\",\"per_email\":\"hui.zhang@ubc.ca\",\"per_phone\":\"604 827 5919\"},{\"per_cwl\":\"vesnap\",\"per_firstname\":\"Vesna \",\"per_lastname\":\"Pavlovic\",\"per_email\":\"vesnap@mail.ubc.ca\",\"per_phone\":\"604-827-4367\"},{\"per_cwl\":\"orange16\",\"per_firstname\":\"Yi Y\",\"per_lastname\":\"Yang\",\"per_email\":\"yi.yang@ubc.ca\",\"per_phone\":\"604-827-3939\"},{\"per_cwl\":\"hjantzen\",\"per_firstname\":\"Heidi\",\"per_lastname\":\"Jantzen\",\"per_email\":\"heidi.jantzen@ubc.ca\",\"per_phone\":\"/\"},{\"per_cwl\":\"kranta\",\"per_firstname\":\"Krista\",\"per_lastname\":\"Ranta\",\"per_email\":\"krista@brc.ubc.ca\",\"per_phone\":\"604-822-8635\"},{\"per_cwl\":\"miaosy\",\"per_firstname\":\"Suying\",\"per_lastname\":\"Miao\",\"per_email\":\"jane.miao@ubc.ca\",\"per_phone\":\"604 827 4367\"},{\"per_cwl\":\"merkens\",\"per_firstname\":\"Helen\",\"per_lastname\":\"Merkens\",\"per_email\":\"hmerkens@bccrc.ca\",\"per_phone\":\"604-675-8000-ext 7629\"},{\"per_cwl\":\"saialpa\",\"per_firstname\":\"Alpa\",\"per_lastname\":\"Darji\",\"per_email\":\"alpa.darji@ubc.ca\",\"per_phone\":\"7-4367\"},{\"per_cwl\":\"dcarlsen\",\"per_firstname\":\"Diana\",\"per_lastname\":\"Carlsen\",\"per_email\":\"diana.carlsen@ubc.ca\",\"per_phone\":\"604.827.4319\"},{\"per_cwl\":\"dsolomon\",\"per_firstname\":\"Dennis\",\"per_lastname\":\"Solomon\",\"per_email\":\"dennis.solomon@ubc.ca\",\"per_phone\":\"604-675-8816\"},{\"per_cwl\":\"mjhan94\",\"per_firstname\":\"Min-Ji\",\"per_lastname\":\"Han\",\"per_email\":\"mjhan94@mail.ubc.ca\",\"per_phone\":\"6048273425\"},{\"per_cwl\":\"vling\",\"per_firstname\":\"Victor\",\"per_lastname\":\"Ling\",\"per_email\":\"vling@bccrc.ca\",\"per_phone\":\"604-675-8101\"}],\"prot_total_num\":\"245\",\"prot_url\":\"https://dev.rise.ubc.ca/rise/sd/Rooms/DisplayPages/LayoutInitial?Container=com.webridge.entity.Entity[OID[2872E65F28508E4D8B145CEE84F2359A]]\"}";
                  var speciesMappingStr =
                "{\"Rats\": [\"rat\", \"Rat\"],\"Horses\":[\"horse\", \"Hor\"],\"Mice\":[\"mouse\", \"Mic\"],\"Rabbits\":[\"rabbit\", \"Bun\"],\"Cows\":[\"cattle\", \"Cow\"]}";

            Proxy p = new Proxy();
            p.pushRISeDataToMosaic(null, null, speciesMappingStr, jSonString, false);
        }

    }
}